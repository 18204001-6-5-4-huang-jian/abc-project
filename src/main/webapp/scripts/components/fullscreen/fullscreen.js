webpackJsonp([2],{100:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"chart-list-panel",computed:{isFullScreenWatch:function(){return this.$store.state.fullscreen.isFullScreenWatch},isShowChartList:function(){return this.$store.state.fullscreen.isShowChartList},curWatchChartIdx:function(){return this.$store.state.fullscreen.curWatchChartIdx},dashBoard:function(){return this.$store.state.dashboard.curDashBoard},charts:function(){return this.dashBoard&&this.isFullScreenWatch?this.dashBoard.charts||[]:[]}},watch:{curWatchChartIdx:function(t){this.$store.commit("zk_setCurWatchChart_copy",{from:"changeIndex",chart:this.charts[t]})}},methods:{switchChart:function(t){this.$store.commit("setCurWatchChartIdx",{idx:t})},backgroundImage:function(t){if(!t.chartType)return"line";switch(t.chartType){case"table":return"table";case"line":return"line";case"scatter":return"scatter";case"area":return"area";case"bar":return"bar";case"columns":return"columns";case"column":return"column";default:return"line"}}}}},126:function(t,e,a){e=t.exports=a(72)(),e.push([t.i,'.fullscreen-wrapper .chart-header-wrapper[data-v-1b12a475]{position:absolute;top:0;left:0;width:100%;height:50px;z-index:2000}.fullscreen-wrapper .chart-header-wrapper-fullscreen[data-v-1b12a475]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.fullscreen-wrapper .chart-header-wrapper-fullscreen>div[data-v-1b12a475]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;font-size:12px;line-height:16px;cursor:pointer}.fullscreen-wrapper .chart-header-wrapper-fullscreen .chart-header-chart-title[data-v-1b12a475]{cursor:default}.fullscreen-wrapper .chart-header-wrapper-fullscreen .btn-back[data-v-1b12a475]{width:120px;font-size:14px;color:#7985a3;position:absolute;left:0;top:0}.fullscreen-wrapper .chart-header-wrapper-fullscreen .btn-back[data-v-1b12a475]:hover{color:#92bdd2}.fullscreen-wrapper .chart-header-wrapper-fullscreen .btn-back[data-v-1b12a475]:before{content:" <";vertical-align:"top";margin-right:10px}.fullscreen-wrapper .chart-header-wrapper-fullscreen>div>div.icon[data-v-1b12a475]{padding:0;margin:0 10px 0 0;width:16px;height:16px;background-repeat:no-repeat;background-size:initial}.fullscreen-wrapper .chart-header-chart-menu[data-v-1b12a475]{-ms-flex-preferred-size:49px;flex-basis:49px}.fullscreen-wrapper .chart-header-chart-menu .icon[data-v-1b12a475]{margin:0!important;background-position:-64px 0}.fullscreen-wrapper .chart-header-chart-menu:hover .icon[data-v-1b12a475]{background-position:-80px 0}.fullscreen-wrapper .chart-header-caption-tab.marginRight[data-v-1b12a475]{margin-right:90px}.fullscreen-wrapper .chart-header-caption-tab[data-v-1b12a475],.fullscreen-wrapper .chart-header-chart-tab[data-v-1b12a475],.fullscreen-wrapper .chart-header-table-tab[data-v-1b12a475]{-ms-flex-preferred-size:160px;flex-basis:160px}.fullscreen-wrapper .chart-header-chart-tab .icon[data-v-1b12a475]{background-position:0 0}.fullscreen-wrapper .chart-header-chart-tab.active .icon[data-v-1b12a475],.fullscreen-wrapper .chart-header-chart-tab:hover .icon[data-v-1b12a475]{background-position:-16px 0}.fullscreen-wrapper .chart-header-table-tab .icon[data-v-1b12a475]{background-position:-32px 0}.fullscreen-wrapper .chart-header-table-tab.active .icon[data-v-1b12a475],.fullscreen-wrapper .chart-header-table-tab:hover .icon[data-v-1b12a475]{background-position:-48px 0}.fullscreen-wrapper .chart-header-caption-tab .icon[data-v-1b12a475]{background-position:-64px 0}.fullscreen-wrapper .chart-header-caption-tab.active .icon[data-v-1b12a475],.fullscreen-wrapper .chart-header-caption-tab:hover .icon[data-v-1b12a475]{background-position:-80px 0}.fullscreen-wrapper .chart-header-chart-title[data-v-1b12a475]{position:absolute;left:50%;top:50px;-webkit-transform:translateX(-50%);transform:translateX(-50%);font-size:16px!important;font-weight:600;color:#19bdec}.fullscreen-wrapper .chart-header-exit-fullscreen[data-v-1b12a475]{-ms-flex-preferred-size:110px;flex-basis:110px;height:32px!important;line-height:32px;margin:0 15px 0 0;transition:all .1s linear}.fullscreen-wrapper .chart-header-exit-fullscreen .icon[data-v-1b12a475]{background-position:-128px 0}.data-export[data-v-1b12a475]{position:absolute;right:0;top:0}.data-export .dropdown-toggle[data-v-1b12a475]{height:32px;line-height:32px;padding:0 20px;margin-right:15px;color:inherit;text-decoration:none}.data-export .dropdown-toggle[data-v-1b12a475]:hover{color:#19bdec}.data-export .dropdown-toggle:hover .icon-export[data-v-1b12a475]{background-position:-192px -7px}.data-export .icon-export[data-v-1b12a475]{display:inline-block;margin-right:7.5px;width:16px;height:16px;vertical-align:text-bottom;background:url(/images/sprite-fullscreen.png) no-repeat;background-position:-165px -7px}',""])},129:function(t,e,a){e=t.exports=a(72)(),e.push([t.i,".fullscreen-wrapper{position:fixed;top:0;left:0;right:0;bottom:0;z-index:100;color:#7985a3}",""])},133:function(t,e,a){e=t.exports=a(72)(),e.push([t.i,".lineheight21[data-v-305efc24]{line-height:21px!important}.height35px[data-v-305efc24]{height:35px!important}.fadebutton-enter-active[data-v-305efc24],.fadebutton-leave-active[data-v-305efc24]{transition:opacity .1s}.fadebutton-enter[data-v-305efc24],.fadebutton-leave-active[data-v-305efc24]{opacity:0}.triangleout[data-v-305efc24]{border-right:12px solid #373e50;left:-12px;top:15px}.trianglein[data-v-305efc24],.triangleout[data-v-305efc24]{width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;position:absolute}.trianglein[data-v-305efc24]{border-right:12px solid #212632;left:1px;top:-10px}.triangleoutright[data-v-305efc24]{border-left:12px solid #373e50;right:-12px;top:15px;display:none}.triangleinright[data-v-305efc24],.triangleoutright[data-v-305efc24]{width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;position:absolute}.triangleinright[data-v-305efc24]{border-left:12px solid #212632;left:-13px;top:-10px}#charttag[data-v-305efc24]{width:300px;position:absolute;z-index:99999;background:#212632;border:1px solid #373e50;box-shadow:0 2px 10px 0 rgba(0,0,0,.4);border-radius:4px;display:none}.ct-header[data-v-305efc24]{height:30px;padding:0 15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.ct-header .color-bar[data-v-305efc24]{width:15px;height:100%;position:relative}.ct-header .color-bar div[data-v-305efc24]{cursor:pointer;top:8px;left:0;position:absolute;border-radius:50%;height:14px;width:14px;transition:left .2s linear}.ct-header .color-bar div i[data-v-305efc24]{display:inline-block;height:12px;width:12px;border-radius:50%;border:1px solid #212632;position:absolute;left:0;top:0}.ct-header .color-bar div.active[data-v-305efc24]{z-index:999999}.ct-header .color-bar div:nth-child(4) i[data-v-305efc24]{background-color:#ed6723}.ct-header .color-bar div:nth-child(4).active[data-v-305efc24]{border:1px solid #ed6723}.ct-header .color-bar div:nth-child(3) i[data-v-305efc24]{background-color:#f69733}.ct-header .color-bar div:nth-child(3).active[data-v-305efc24]{border:1px solid #f69733}.ct-header .color-bar div:nth-child(2) i[data-v-305efc24]{background-color:#c8ce2f}.ct-header .color-bar div:nth-child(2).active[data-v-305efc24]{border:1px solid #c8ce2f}.ct-header .color-bar div:first-child i[data-v-305efc24]{background-color:#5b9ce4}.ct-header .color-bar div:first-child.active[data-v-305efc24]{border:1px solid #5b9ce4}.ct-header .writedel[data-v-305efc24]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ct-header .writedel i[data-v-305efc24]{display:inline-block;height:16px;width:16px;margin-left:15px;cursor:pointer}.ct-header .writedel .tag_write[data-v-305efc24]{background-image:url(/images/tag/icon-write.png)}.ct-header .writedel .tag_write[data-v-305efc24]:hover{background-image:url(/images/tag/icon-write-hover.png)}.ct-header .writedel .tag_del[data-v-305efc24]{background-image:url(/images/tag/icon-del.png)}.ct-header .writedel .tag_del[data-v-305efc24]:hover{background-image:url(/images/tag/icon-del-hover.png)}.color-bar[data-v-305efc24]:hover{width:100px}.color-bar:hover div[data-v-305efc24]:nth-child(3){left:25px}.color-bar:hover div[data-v-305efc24]:nth-child(2){left:50px}.color-bar:hover div[data-v-305efc24]:first-child{left:75px}.ctbody.backcolor[data-v-305efc24]{background:#1b1f29}.ct-body[data-v-305efc24]{min-height:35px;padding:10px 19px}.ct-body #tagtextshow[data-v-305efc24]{font-size:14px;color:#7985a3;line-height:21px}.ct-body textarea[data-v-305efc24]{width:100%;height:35px;font-size:14px;color:#7985a3;max-height:250px;resize:none;line-height:35px}.ct-body .haveTextShow[data-v-305efc24]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:5px 0}.ct-body .haveTextShow span[data-v-305efc24]{color:#525e7b;font-size:12px}.ct-body .haveTextShow button[data-v-305efc24]{background:#0facd9;borer:none;outline:none;border-radius:4px;height:22px;width:55px;color:#fff}.ct-footer[data-v-305efc24]{height:35px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 15px}.ct-footer .xname[data-v-305efc24],.ct-footer .yname[data-v-305efc24]{height:100%;line-height:35px;font-size:12px;color:#7985a3}",""])},145:function(t,e,a){e=t.exports=a(72)(),e.push([t.i,".cc-chart-list-panel-wrapper{position:absolute;top:51px;left:0;bottom:0;z-index:3000;width:220px}.cc-chart-list-container{padding:20px 0 0;margin:0;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;list-style:none}.cc-chart-item-wrapper{padding:0;margin:0}.cc-chart-item-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 20px;margin:0;width:100%;height:60px;cursor:pointer}.cc-chart-item-content .icon{-ms-flex-preferred-size:40px;flex-basis:40px;padding:0;margin:0 10px 0 0;width:40px;height:40px;background-repeat:no-repeat;background-size:inherit}.cc-chart-item-content .cc-chart-item-title{width:130px;max-height:34px;text-align:left;font-size:12px;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;word-break:break-all}",""])},155:function(t,e,a){e=t.exports=a(72)(),e.push([t.i,".cc-chart-content-panel-wrapper{position:absolute;left:0;top:50px;right:0;bottom:0;padding:0;margin:0;width:100%}.cc-body{padding:40px 20px 20px;width:100%;height:100%}#cc-chart-container,.cc-table-content{width:100%;height:100%;overflow-y:auto}.cc-table-content{position:relative;overflow-x:hidden}.cc-table-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;padding:0;margin:0 0 5px;height:30px;position:relative}.cc-table-data-count,.cc-table-data-time{margin:0 10px;font-size:12px}#cc-table-container{width:100%;height:65%;color:#79839c;overflow-y:auto}#cc-table-container td{background:inherit;text-align:left;vertical-align:middle}#cc-table-container tbody>tr:nth-child(2n)>td{background:#1b1f29}#cc-table-container tbody>tr:nth-child(odd)>td{background:#20242e}#cc-table-container .handsontable th{background-color:#20242e}#cc-table-container .handsontable td,#cc-table-container .handsontable th{line-height:18px;padding:6px 0;text-align:center;border:0!important;color:#7985a3!important;box-sizing:border-box}#cc-table-container .ht_clone_top tbody>tr>td{background-color:#20242e;font-weight:700}#cc-table-container tbody>tr>td:first-child{padding-left:15px}#cc-table-container .ht_master tbody>tr>td{font-size:12px}.cc_search_date{height:100%;color:#287ddc;border:1px solid #fff;width:90px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:12px;float:right;z-index:999;position:absolute;right:0;top:0;cursor:pointer}.cc_search_date.active{border-color:#ddd;border-bottom-color:#fdfdfd;background-color:#fdfdfd}.cc_search_date img{margin-left:5px;transition:all .3s linear}.cc_search_date.active img{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.cc_search_toolbar{height:55px;width:100%;background-color:#fdfdfd;border:1px solid #ddd;padding:0 20px;z-index:99;margin-top:-6px;margin-bottom:15px}.cc_search_toolbar,.cc_st_inputs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cc_st_inputs{height:100%;font-size:12px;color:#333;margin-right:20px}.cc_st_inputs input{width:150px;margin-left:20px;border:1px solid #eee;height:30px;outline:none;text-indent:10px;line-height:30px}.cc_st_inputs input::-webkit-input-placeholder{color:#999}.cc_st_inputs input:-moz-placeholder,.cc_st_inputs input::-moz-placeholder{color:#999}.cc_st_inputs input:-ms-input-placeholder{color:#999}.cc_search_toolbar button{height:30px;width:100px;background-color:#287ddc;color:#fff;outline:none;border:none;font-size:12px}.cc_search_toolbar button:hover{opacity:.8}.edit-chart-style{position:absolute;right:20px;top:5px;font-size:12px;color:#666;cursor:pointer;transition:all 1 .3s}.edit-chart-style .icon-edit{width:20px;height:20px;display:inline-block;margin:5px;vertical-align:-11px;background:url(/images/icon-edit-normal.png) no-repeat 50%;background-size:100%}.edit-chart-style:hover{color:#287ddc}.edit-chart-style:hover .icon-edit{background-image:url(/images/icon-edit-hover.png)}.cc-body.editing{width:-120%}.chart-style-wrapper{position:absolute;right:0;top:0;border-left:1px solid #eee;width:219px;height:100%;background:#eff3f6}.caption_wrapper_list{padding:0 20px 20px}.caption_wrapper_list .caption_list_title{color:#0facd9}.caption_wrapper_list .caption_list_title span{display:inline-block;height:16px;width:3px;margin-right:8px;margin-top:-2px;background-color:#0facd9;vertical-align:middle}.cc-caption-content{width:100%;height:850px;overflow-y:scroll}.cc-caption-content .caption_wrapper_list:nth-child(2){width:100%;padding-top:6.4%}.caption_wrapper_list .title_div{width:1440px;height:80px;line-height:80px;border:1px solid #596175;margin:10px 0;position:relative}.caption_wrapper_list .title_div p{float:left;text-align:center;width:16px;height:16px;border-radius:50%;background:#ed6723;border:2px solid #fff;margin-top:12px;margin-left:14.1px}.caption_wrapper_list .title_div h6{float:left;font-size:12px;color:#7985a3;width:727px;height:54px;margin-top:12px;margin-left:36.9px}.caption_wrapper_list .title_div h5{width:80.4px;margin-left:60px}.caption_wrapper_list .title_div h4,.caption_wrapper_list .title_div h5{float:left;font-size:12px;color:#7985a3;height:17px;line-height:17px;margin-top:33px}.caption_wrapper_list .title_div h4{width:75px;margin-left:110px}.caption_wrapper_list .title_div h3{float:left;font-size:12px;color:#0facd9;width:49.8px;height:16px;margin-top:33px;margin-left:160px}.nocaption{margin-top:15px}.nocaption textarea{text-indent:.5em;text-align:none;color:#596175;width:1420px;height:50px;display:block;border:none;font-size:12px;resize:none}.nocaption img{width:16px;height:16px;display:block;float:left}",""])},173:function(t,e,a){t.exports=a.p+"icon-write-hover.png?09f2a8a8c105460e78416d26d7a8821d"},174:function(t,e,a){t.exports=a.p+"icon-write.png?b135ee821bf462ea8d4c595b9f1f2adc"},176:function(t,e,a){a(243);var r=a(10)(a(85),a(206),"data-v-305efc24",null);t.exports=r.exports},187:function(t,e,a){a(265);var r=a(10)(a(98),a(225),null,null);t.exports=r.exports},188:function(t,e,a){a(236);var r=a(10)(a(99),a(199),"data-v-1b12a475",null);t.exports=r.exports},189:function(t,e,a){a(255);var r=a(10)(a(100),a(217),null,null);t.exports=r.exports},199:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-header-wrapper"},[a("div",{staticClass:"chart-header-wrapper-fullscreen"},[a("div",{staticClass:"btn-back",on:{click:function(e){t.exitFullScreen()}}},[t._v(t._s(t.lang?"返回":"back"))]),t._v(" "),t.isMobile?t._e():a("div",{staticClass:"chart-header-caption-tab",class:{active:"caption"==t.showtype,marginRight:1==t.exports},on:{click:function(e){t.toCaption()}}},[a("div",{staticClass:"icon"}),a("span",[t._v(t._s(t.lang?"说明":"Caption"))])]),t._v(" "),t.isMobile||t.isTableChart?t._e():a("div",{staticClass:"chart-header-table-tab",class:{active:"table"==t.showtype},on:{click:function(e){t.setFullScreenWatchTable(!0)}}},[a("div",{staticClass:"icon"}),a("span",[t._v(t._s(t.lang?"数据":"Data"))])]),t._v(" "),t.isMobile?t._e():a("div",{staticClass:"chart-header-chart-tab",class:{active:"chart"==t.showtype},on:{click:function(e){t.setFullScreenWatchTable(!1)}}},[a("div",{staticClass:"icon"}),a("span",[t._v(t._s(t.lang?"图表":"Chart"))])]),t._v(" "),a("div",{staticClass:"chart-header-chart-title",domProps:{textContent:t._s(t.curWatchChart_copy.title)}}),t._v(" "),t.isMobile&&!t.isTableChart?a("div",{staticClass:"chart-header-change-tab",on:{click:t.changeFullScreenWatchTable}},[a("div",{staticClass:"icon"})]):t._e(),t._v(" "),t.isMobile?t._e():a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.exports,expression:" exports == 1 "}],staticClass:"data-export"},[a("a",{staticClass:"dropdown-toggle icon-wrapper",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.fileExport("excel")}}},[a("i",{staticClass:"icon-export"}),t._v(" "),a("span",[t._v(t._s(t.lang?"导出":"Export Data"))])])])])])},staticRenderFns:[]}},202:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fullscreen-wrapper"},[a("chart-header"),t._v(" "),a("chart-content")],1)},staticRenderFns:[]}},206:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tagbox",attrs:{id:"charttag"},on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.admin||3==t.admin,expression:"admin == 1 || admin == 3"}],staticClass:"ct-header"},[a("div",{staticClass:"color-bar"},[a("div",{class:{active:"#5B9CE4"==t.sc},on:{click:function(e){t.changecolor("#5B9CE4")}}},[a("i")]),t._v(" "),a("div",{class:{active:"#C8CE2F"==t.sc},on:{click:function(e){t.changecolor("#C8CE2F")}}},[a("i")]),t._v(" "),a("div",{class:{active:"#F69733"==t.sc},on:{click:function(e){t.changecolor("#F69733")}}},[a("i")]),t._v(" "),a("div",{class:{active:"#ED6723"==t.sc},on:{click:function(e){t.changecolor("#ED6723")}}},[a("i")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.newtag,expression:"!newtag"}],staticClass:"writedel"},[a("i",{staticClass:"tag_write",attrs:{title:"编辑"},on:{click:t.writenow}}),t._v(" "),a("i",{staticClass:"tag_del",attrs:{title:"删除"},on:{click:t.deltag}})])]),t._v(" "),a("div",{staticClass:"ct-body"},[t.writeing||t.newtag?t._e():a("span",{attrs:{id:"tagtextshow"},domProps:{textContent:t._s(t.spantext)},on:{dblclick:t.writenow}}),t._v(" "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:t.writeing||t.newtag,expression:"writeing || newtag"},{name:"model",rawName:"v-model",value:t.tagtext,expression:"tagtext"}],class:{lineheight21:t.tagtext.length>0,height35px:0==t.tagtext.length,backcolor:t.admin},attrs:{maxlength:"140",id:"tagtextinput",placeholder:"按 Enter 保存"},domProps:{value:t.tagtext},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.saveText(e)},blur:t.textblur,focus:t.textfocus,input:function(e){e.target.composing||(t.tagtext=e.target.value)}}}),t._v(" "),a("transition",{attrs:{name:"fadebutton"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.tagtext.length>0,expression:"tagtext.length>0"}],staticClass:"haveTextShow"},[a("span",[t._v("按 Enter 保存")]),t._v(" "),a("button",{on:{click:t.saveText}},[t._v("确定")])])])],1),t._v(" "),a("div",{staticClass:"ct-footer"},[a("div",{staticClass:"yname"},[t._v(t._s(t.taglinename))]),t._v(" "),a("div",{staticClass:"xname"},[t._v(t._s(t.tagxname))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"triangleout"},[a("div",{staticClass:"trianglein"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"triangleoutright"},[a("div",{staticClass:"triangleinright"})])}]}},217:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowChartList,expression:"isShowChartList"}],staticClass:"cc-chart-list-panel-wrapper"},[a("ul",{staticClass:"cc-chart-list-container"},t._l(t.charts,function(e,r){return a("li",{staticClass:"cc-chart-item-wrapper"},["excel_image"!=e.type?a("div",{staticClass:"cc-chart-item-content",class:{active:r==t.curWatchChartIdx},on:{click:function(e){t.switchChart(r)}}},[a("div",{staticClass:"icon",class:t.backgroundImage(e)}),t._v(" "),a("div",{staticClass:"cc-chart-item-title"},[a("span",{domProps:{textContent:t._s(e.title)}})])]):t._e()])}))])},staticRenderFns:[]}},225:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cc-chart-content-panel-wrapper"},[r("div",{staticClass:"cc-body",class:{editing:t.showEditPanel}},[r("ChartTag",{attrs:{_left:t.tagLeft,_top:t.tagTop,sc:t.sc,tagpoint:t.tagpoint,admin:t.admin,newtag:t.newtag,spantext:t.spantext,cleantagtext:t.cleantagtext,tagxname:t.tagxname,taglinename:t.taglinename},on:{changetagcolor:t.changetagcolor,changenewtag:t.changenewtag,changespantext:t.changespantext,savepoint:t.savepoint,deletepoint:t.deletepoint}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"chart"==t.showtype,expression:" showtype == 'chart'"}],attrs:{id:"cc-chart-container"}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"table"==t.showtype,expression:" showtype == 'table'"}],staticClass:"cc-table-content"},[r("div",{staticClass:"cc-table-header"},[r("div",{staticClass:"cc-table-data-count"},[t._v("\n                                             共 "),r("span",{domProps:{textContent:t._s(t.dataCount)}}),t._v(" 条数据\n                ")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.dataUpdateTime,expression:"dataUpdateTime"}],staticClass:"cc-table-data-time"},[t._v("\n                                            更新时间: "),r("span",{domProps:{textContent:t._s(t.dataUpdateTime)}})])]),t._v(" "),t.haveTool?r("div",{staticClass:"cc_search_toolbar"},[t._l(t.toolbars,function(e,a){return r("div",{key:a,staticClass:"cc_st_inputs"},[t._v("\n                         "+t._s(e.text)+"\n                    "),"date"==e.type?r("input",{attrs:{type:"text",isdate:!0,name:e.name,placeholder:"请输入"+e.text,"data-date-format":"yyyy-mm-dd",readonly:""},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.cc_search_now(e)}}}):t._e(),t._v(" "),"date"!=e.type?r("input",{attrs:{type:e.type,name:e.name,placeholder:"请输入"+e.text},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.cc_search_now(e)}}}):t._e()])}),t._v(" "),r("button",{on:{click:t.cc_search_now}},[t._v("查 询")])],2):t._e(),t._v(" "),r("div",{attrs:{id:"cc-table-container"}})]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"caption"==t.showtype,expression:"showtype == 'caption'"}],staticClass:"cc-caption-content"},[r("div",{staticClass:"caption_wrapper_list"},[t._m(0),t._v(" "),r("div",{staticClass:"nocaption"},[r("img",{directives:[{name:"show",rawName:"v-show",value:1==t.admin,expression:" admin == 1 "}],attrs:{src:a(174)}}),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{readonly:t.read},domProps:{value:t.message},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;e.preventDefault(),t.saveText(e)},blur:t.saveText,input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"caption_wrapper_list"},[r("div",{staticClass:"caption_list_title"},[r("span"),t._v("\n                                                                           图表标注                                        \n                 "),t._l(t.arr,function(e,i){return r("div",{staticClass:"title_div"},[r("p",{style:{background:e.marker.fillColor}}),t._v(" "),r("h6",[t._v(t._s(e.marker.text))]),t._v(" "),r("h5",[t._v(t._s(e.series_name))]),t._v(" "),r("h4",[t._v(t._s(t._f("h_timechange")(e.point_id)))]),t._v(" "),r("h3",{on:{click:function(e){t.changeDime(i,e)}}},[r("img",{attrs:{src:a(173),id:"_img"},on:{click:function(e){t.changeDime(i,e)}}}),t._v("  编辑")])])})],2)])])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"caption_list_title"},[a("span"),t._v("\n                                                                         图表说明                                        \n                ")])}]}},236:function(t,e,a){var r=a(126);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(73)("3d865a60",r,!0)},239:function(t,e,a){var r=a(129);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(73)("b3b151dc",r,!0)},243:function(t,e,a){var r=a(133);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(73)("4acb2cf9",r,!0)},255:function(t,e,a){var r=a(145);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(73)("67f256c2",r,!0)},265:function(t,e,a){var r=a(155);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(73)("465393a0",r,!0)},56:function(t,e,a){a(239);var r=a(10)(a(97),a(202),null,null);t.exports=r.exports},72:function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var a=this[e];a[2]?t.push("@media "+a[2]+"{"+a[1]+"}"):t.push(a[1])}return t.join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var n=this[i][0];"number"==typeof n&&(r[n]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(a&&!o[2]?o[2]=a:a&&(o[2]="("+o[2]+") and ("+a+")"),t.push(o))}},t}},73:function(t,e,a){function r(t){for(var e=0;e<t.length;e++){var a=t[e],r=h[a.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](a.parts[i]);for(;i<a.parts.length;i++)r.parts.push(n(a.parts[i]));r.parts.length>a.parts.length&&(r.parts.length=a.parts.length)}else{for(var o=[],i=0;i<a.parts.length;i++)o.push(n(a.parts[i]));h[a.id]={id:a.id,refs:1,parts:o}}}}function i(){var t=document.createElement("style");return t.type="text/css",d.appendChild(t),t}function n(t){var e,a,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return g;r.parentNode.removeChild(r)}if(x){var n=u++;r=p||(p=i()),e=o.bind(null,r,n,!1),a=o.bind(null,r,n,!0)}else r=i(),e=c.bind(null,r),a=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else a()}}function o(t,e,a,r){var i=a?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var n=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(n,o[e]):t.appendChild(n)}}function c(t,e){var a=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),i&&(a+="\n/*# sourceURL="+i.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=a(74),h={},d=s&&(document.head||document.getElementsByTagName("head")[0]),p=null,u=0,f=!1,g=function(){},x="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,a){f=a;var i=l(t,e);return r(i),function(e){for(var a=[],n=0;n<i.length;n++){var o=i[n],c=h[o.id];c.refs--,a.push(c)}e?(i=l(t,e),r(i)):i=[];for(var n=0;n<a.length;n++){var c=a[n];if(0===c.refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete h[c.id]}}}};var b=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},74:function(t,e){t.exports=function(t,e){for(var a=[],r={},i=0;i<e.length;i++){var n=e[i],o=n[0],c=n[1],s=n[2],l=n[3],h={id:t+":"+i,css:c,media:s,sourceMap:l};r[o]?r[o].parts.push(h):a.push(r[o]={id:o,parts:[h]})}return a}},85:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"charttag",props:{_left:{type:Number,default:10},_top:{type:Number,default:10},tagpoint:{type:Object,default:null},admin:{type:Number,default:0},newtag:{type:Boolean,default:!1},spantext:{type:String,default:""},sc:{type:String,default:""},cleantagtext:{type:Boolean,default:!1},tagxname:{type:String,default:""},taglinename:{type:String,default:""}},watch:{_left:function(t){this.$refs.tagbox.style.left=t+"px"},_top:function(t){this.$refs.tagbox.style.top=t+"px"},cleantagtext:function(t){t&&(this.tagtext="")}},data:function(){return{tagtext:"",writeing:!1,newSaveText:""}},methods:{saveText:function(){var t=this;0==$.trim(t.tagtext).length?($("#charttag").hide(),t.$emit("savepoint",t.tagpoint,void 0)):(t.$emit("savepoint",t.tagpoint,{fillColor:t.sc,text:t.tagtext,enabled:!0,lineColor:"#fff",radius:8,lineWidth:2}),t.newSaveText=t.tagtext),this.$emit("changespantext",t.tagtext),this.tagtext="",this.writeing=!1,this.$emit("changenewtag",!1)},textblur:function(){},textfocus:function(){},writenow:function(){var t=this;this.admin&&(this.newSaveText=t.spantext,this.writeing=!0,this.tagtext=t.spantext,setTimeout(function(){$("#tagtextinput").focus()},0))},deltag:function(){var t=this;this.$emit("deletepoint",t.tagpoint,void 0),$("#charttag").hide()},changecolor:function(t){var e=this;this.$emit("changetagcolor",t);var a="";this.writeing?(a=e.newSaveText,e.tagpoint.update({marker:{fillColor:t,text:a,enabled:!0,lineColor:"#fff",radius:8,lineWidth:2}})):(a=e.spantext,this.$emit("savepoint",e.tagpoint,{fillColor:t,text:a,enabled:!0,lineColor:"#fff",radius:8,lineWidth:2})),$("#tagtextinput").focus()}},mounted:function(){autosize(document.querySelector(".ct-body>textarea"))}}},97:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(188),i=a.n(r),n=a(189),o=(a.n(n),a(187)),c=a.n(o);e.default={name:"full-screen",components:{ChartHeader:i.a,ChartContent:c.a}}},98:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(176),i=a.n(r),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={name:"chart-content-panel",components:{ChartTag:i.a},data:function(){return{dataCount:0,updateTimer:null,haveTool:!1,toolbars:[],tagLeft:0,tagTop:0,tagpoint:null,admin:0,exports:0,newtag:!1,cleantagtext:!1,sc:"#ED6723",spantext:"",tagxname:"",taglinename:"",arr:[],message:"图表还没有说明，点击添加",read:"readonly",fillcolor:""}},mounted:function(){if(this.admin=parseInt(sessionStorage.marker),this.$store.commit("setFullScreenWatch",{isWatch:!0}),!this.curWatchChart)return this.$store.commit("setFullScreenWatch",{isWatch:!1}),this.$router.push({name:"dashboard"}),!1},computed:{isCustomChart:function(){return!this.curWatchChart||("research_data_list"===this.curWatchChart.type||"research_stock_card"===this.curWatchChart.type)},isFromShareBoard:function(){return!!this.dashBoard&&this.dashBoard.creator_id!=sessionStorage.uid},showEditPanel:function(){return this.isEditStyle&&!this.isFullScreenWatchTable},isEditStyle:function(){return this.$store.state.fullscreen.isEditStyle},isFullScreenWatch:function(){return this.$store.state.fullscreen.isFullScreenWatch},isFullScreenWatchTable:function(){return this.$store.state.fullscreen.isFullScreenWatchTable},isSwitchingChart:function(){return this.$store.state.fullscreen.isSwitchingChart},isShowChartList:function(){return this.$store.state.fullscreen.isShowChartList},dashBoard:function(){return this.$store.state.dashboard.curDashBoard},curWatchChartIdx:function(){return this.$store.state.fullscreen.curWatchChartIdx},curWatchChart:function(){if(this.dashBoard&&this.isFullScreenWatch){var t=this.dashBoard.charts[this.curWatchChartIdx];return t||null}return null},curWatchChart_copy:function(){return _.cloneDeep(this.$store.state.fullscreen.curWatchChart_copy)},isTableChart:function(){if(this.curWatchChart&&this.isFullScreenWatch){var t=this.curWatchChart.options&&this.curWatchChart.options.chart&&this.curWatchChart.options.chart.type;return"table"==this.curWatchChart.chartType||-1!=this.curWatchChart.type.indexOf("table")||"table"==t&&-1==this.curWatchChart.type.indexOf("research")}return!1},dataUpdateTime:function(){if(this.curWatchChart&&this.isFullScreenWatch){if(this.curWatchChart.dataTable&&this.curWatchChart.dataTable.chart_update_time){var t=new Date(parseInt(this.curWatchChart.dataTable.chart_update_time));return[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-").replace(/(?=\b\d\b)/g,"0")}return""}return""},country:function(){return this.$store.state.dashboard.lang?"cn":"en"},curDay:function(){return this.$store.state.dashboard.curDay},showtype:function(){return this.$store.state.fullscreen.showtype}},watch:{isFullScreenWatch:function(t){if(!t)return!1;this.$store.commit("zk_resetFullscreenState"),this.$store.commit("zk_setCurWatchChart_copy",{from:"全屏切换",chart:_.cloneDeep(this.curWatchChart)})},isFullScreenWatchTable:function(t){var e=this;t?this.$nextTick(e.drawTable()):this.$nextTick(e.drawChart())},curWatchChart_copy:function(t){var e=this;if(!t)return!1;this.isTableChart?this.$store.commit("setFullScreenWatchTable",{isWatch:!0}):(this.updateTimer&&window.clearTimeout(this.updateTimer),this.updateTimer=window.setTimeout(function(){e.drawChart()},0))},showEditPanel:function(t){var e=this;this.updateTimer&&window.clearTimeout(this.updateTimer),this.updateTimer=window.setTimeout(function(){e.isFullScreenWatchTable||e.drawChart()},0)},showtype:function(t){var e=this;0==e.admin||null==e.admin?e.read="readonly":1==e.admin&&(e.read=null),e.curWatchChart.description?e.message=e.curWatchChart.description:0!=e.admin&&null!=e.admin||(e.message="图表暂时没有说明,您不可编辑"),"caption"==t&&$.get({url:"/api/v1/chart/markers/"+e.curWatchChart.id,contentType:"application/json;chartset=utf-8",success:function(t){t.success?e.arr=t.data.list:new PNotify({text:t.message,type:"error"})},complete:function(){}})}},methods:{drawChart:function(){var t=this;if(!t.curWatchChart)return console.warn("curWatchChart is null"),!1;if(this.isTableChart)return console.warn("wrong draw"),!1;$("#cc-chart-container").empty();var e=_.cloneDeep(t.curWatchChart),a=layer.load(2);$(".layui-layer-loading span.layui-layer-setwin").html("加载中..."),$.get({url:-1!==e.dataSourceUrl.indexOf("?")?e.dataSourceUrl+"&tp="+moment(this.curDay).format("YYYY-MM-DD"):e.dataSourceUrl+"?tp="+moment(this.curDay).format("YYYY-MM-DD"),success:function(r){layer.close(a),r.table&&r.table.data?(e.dataTable=_.cloneDeep(r.table),t.$store.commit("ky_setChartOriginalData",{id:e.id,data:r.table.data.rows.splice(0)}),t.$store.commit("setCurFullChart",{data:ChartHelper.getExportData(e,e.dataTable),title:e.title}),"research_stock_card"==e.type?ChartHelper.drawResearchStockCard("cc-chart-container",{params:$.extend({},e.dataTable.data.params,{country:t.country}),rows:e.dataTable.data.rows},!0):"research_data_list"==e.type?ChartHelper.drawResearchDataList("cc-chart-container",{params:e.dataTable.data.params,rows:e.dataTable.data.rows},!0):t.drawChartData(e.dataTable.data,e)):(console.error(r),new PNotify({text:"绘制失败",type:"error"}))},error:function(e){if(layer.close(a),console.error(e),401===e.status)return t.$router.push({name:"login"}),!1;new PNotify({text:"绘制失败",type:"error"})}})},drawChartData:function(t,e){var a=this;$("#cc-chart-container").empty();try{var r=ChartHelper.getLiveChartConfigV2(e,{width:$(".cc-body").width(),height:$(".cc-body").height()-60,backgroundColor:"#1b1f29",borderColor:"#262a36",xAxis:{lineColor:"#262a36",gridLineColor:"#262a36"},yAxis:{lineColor:"#262a36",gridLineColor:"#262a36"},mode:"fullscreen",tagging:!0,admin:1==a.admin,tagfn:{click:function(t){setTimeout(function(){if(t.point.marker&&t.point.marker.text)a.spantext=t.point.marker.text,a.sc=t.point.marker.fillColor,a.newtag=!1,$("#charttag").show(100);else{if(1!=a.admin)return;a.newtag=!0,a.sc="#ED6723",$("#charttag").show(100),setTimeout(function(){$("#tagtextinput").focus()},300)}t.point.name?a.tagxname=t.point.name:a.tagxname=new Date(t.point.x).toLocaleDateString(),t.point.series.name&&(a.taglinename=t.point.series.name),t.point.plotX+330>$(".cc-chart-content-panel-wrapper").width()?(a.tagLeft=t.point.plotX-270,$(".triangleout").hide(),$(".triangleoutright").show()):(a.tagLeft=t.point.plotX+95,$(".triangleout").show(),$(".triangleoutright").hide()),a.tagTop=t.point.plotY+45,a.tagpoint=t.point,$(".abcdata-wrapper").one("click",function(e){var r=$("#tagtextinput");r.is(":hidden")||($.trim(r.val()).length>0?a.savepoint(t.point,{fillColor:$(".color-bar>.active>i").css("background-color"),text:r.val(),enabled:!0,lineColor:"#fff",radius:8,lineWidth:2}):a.savepoint(t.point,void 0)),a.cleantagtext=!0,$("#charttag").hide(),setTimeout(function(){a.cleantagtext=!1},100)})},100)},mouseOut:function(){}}});"Map"==r._type?$("#cc-chart-container").highcharts("Map",r):"StockChart"==r._type?$("#cc-chart-container").highcharts("StockChart",r):$("#cc-chart-container").highcharts(r)}catch(t){console.warn(t)}this.$store.commit("setSwitchingChart",{isSwitching:!1})},drawTable:function(){var t=this;if(!this.curWatchChart)return void console.warn("curWatchChart is null");var e=_.cloneDeep(this.curWatchChart),a=layer.load(2);$(".layui-layer-loading span.layui-layer-setwin").html("加载中..."),$.get({url:-1!==e.dataSourceUrl.indexOf("?")?e.dataSourceUrl+"&tp="+moment(this.curDay).format("YYYY-MM-DD"):e.dataSourceUrl+"?tp="+moment(this.curDay).format("YYYY-MM-DD"),success:function(r){r.table&&r.table.data?(t.$store.commit("setCurFullChart",{data:ChartHelper.getExportData(e,r.table),title:""}),void 0!==r.table.table&&r.table.table?t.drawTableData(r.table.table):t.drawTableData(t.getPieWidgetData(r.table.data))):(console.error(r),$("#cc-table-container").empty(),t.dataCount=0,e.toolbar||new PNotify({text:"绘制失败",type:"error"})),layer.close(a)},error:function(e){if(layer.close(a),console.error(e),401===e.status)return t.$router.push({name:"login"}),!1;$("#cc-table-container").empty(),t.dataCount=0,new PNotify({text:"绘制失败",type:"error"})}})},drawTableData:function(t){var e=this,a=$(".cc-body").width(),r=$(".cc-body").height()-35;if(this.haveTool&&(r-=65,!t.rows||0==t.rows.length))return $("#cc-table-container").empty(),void new PNotify({text:"暂无数据",type:"error"});if(!t.rows||!t.rows.length)return $("#cc-table-container").empty(),void new PNotify({text:"数据格式错误",type:"error"});if(e.dataCount=t.rows.length-1,t.hasOwnProperty("params")){var i=this.getResearchWidgetData(t);t.rows=i}var n=t.rows[0].length||Object.keys(t.rows[0]||{}).length;"date"!=t.rows[0][0]&&"datetime"!=t.rows[0][0]||(t.rows[0][0]="日期");for(var o=[],c=0;c<t.rows.length;c++){for(var s=!0,l=0;l<t.rows[c].length;l++)isNaN(parseInt(t.rows[c][l]))||(s=!1);if(!s)break;o.push(t.rows[c])}var h={data:t.rows,width:a,height:r,manualColumnResize:!0,fixedRowsTop:o.length>0?o.length:1,cells:function(t,e,a){return{readOnly:!0}}};!n||n<=1||n>20?(h.stretchH="all",h.wordWrap=!1):h.colWidths=(a-10)/n;var d=!1;if(this.curWatchChart.options&&-1!=this.curWatchChart.type.indexOf("chart")&&this.curWatchChart.chartType&&-1==this.curWatchChart.chartType.indexOf("pie")&&-1==this.curWatchChart.chartType.indexOf("polar")&&-1==this.curWatchChart.chartType.indexOf("radar")&&this.curWatchChart.options.xAxis&&"datetime"==this.curWatchChart.options.xAxis.type&&(d=!0),"日期"!=t.rows[0][0]&&"时间"!=t.rows[0][0]||(d=!0),d&&t.rows.length>1&&$.isNumeric(t.rows[1][0])){h.columns=[{renderer:e.formatDate}];for(var c=0;c<n-1;c++)h.columns.push({})}new Handsontable(document.getElementById("cc-table-container"),h),this.$store.commit("setSwitchingChart",{isSwitching:!1})},getResearchWidgetData:function(t){t=t||{};var e=[];if(t.hasOwnProperty("params")&&t.hasOwnProperty("rows")){var a=[];t.params.table&&t.params.table.columns&&t.params.table.columns.forEach(function(t,e){t.field&&a.push(t.field)}),a.length>0&&t.rows.forEach(function(t,r){var i=[];a.forEach(function(e,a){"object"==n(t[e])?(i.push(t[e].title?t[e].title:JSON.stringify(t[e])),t[e].url&&i.push(t[e].url)):i.push(t[e])}),i.length>0&&e.push(i)})}return e},getPieWidgetData:function(t){if(-1==this.curWatchChart.type.indexOf("chart")||!this.curWatchChart.chartType||-1==this.curWatchChart.chartType.indexOf("pie")&&-1==this.curWatchChart.chartType.indexOf("polar")&&-1==this.curWatchChart.chartType.indexOf("radar"))return t;for(var e={},a=[],r=0;r<t.rows[0].length;r++)a.push([t.rows[0][r]]);for(var r=1;r<t.rows.length;r++)for(var i=0;i<t.rows[r].length;i++)a[i].push(t.rows[r][i]);return e.rows=a,e},formatDate:function(t,e,a,r,i,n,o){if($.isNumeric(n)){var c=new Date(parseInt(n));e.innerHTML=[c.getFullYear(),c.getMonth()+1,c.getDate()].join("-").replace(/(?=\b\d\b)/g,"0")}else e.innerHTML=n;return e},getLocalTime:function(t){var e=new Date(parseInt(t)),a=e.getFullYear(),r=e.getMonth()+1;r<10&&(r="0"+r);var i=e.getDate();return i<10&&(i="0"+i),a+"-"+r+"-"+i},beginEdit:function(){this.$store.commit("zk_toggleEditPanel",!0)},changenewtag:function(t){this.newtag=t},changespantext:function(t){this.spantext=t},savepoint:function(t,e){if(e)if(null==t.series)new PNotify({text:"标注失败，请重新标注",type:"error"});else{var a=this;$.post({url:"/api/v1/chart/set-marker/"+a.curWatchChart.id,contentType:"application/json;chartset=utf-8",data:JSON.stringify({series_id:t.series.index,point_id:t.name?t.name:t.x,marker:e,series_name:t.series.name}),success:function(r){"caption"!=a.showtype&&t.update({marker:e})},complete:function(){}})}else if(null==t.series);else{var a=this;$.post({url:"/api/v1/chart/unset-marker/"+a.curWatchChart.id,contentType:"application/json;chartset=utf-8",data:JSON.stringify({series_id:t.series.index,point_id:t.name?t.name:t.x,series_name:t.series.name}),success:function(a){t.update({marker:e})},complete:function(){}})}},deletepoint:function(t,e){var a=this;null!=t.series?$.post({url:"/api/v1/chart/unset-marker/"+a.curWatchChart.id,contentType:"application/json;chartset=utf-8",data:JSON.stringify({series_id:t.series.index,point_id:t.name?t.name:t.x,series_name:t.series.name}),success:function(a){t.update({marker:e})},complete:function(){}}):new PNotify({text:"对不起，删除标注点失败",type:"error"})},changetagcolor:function(t){this.sc=t},saveText:function(){var t=this;t.curWatchChart.description=t.message,$.post({url:"/api/v1/chart/set-desp/"+t.curWatchChart.id,contentType:"application/json;chartset=utf-8",data:JSON.stringify({description:t.message}),success:function(t){console.log(t)},complete:function(){}})},changeDime:function(t,e){var a=this;if(1==a.admin){var r=function(t){return t<10?"0"+t:t};$(".triangleoutright").show(),$(".triangleout").hide(),$("#charttag").show(100,function(){}),a.tagpoint={series:{name:a.arr[t].series_name,index:a.arr[t].series_id},x:a.arr[t].point_id},a.tagLeft=e.target.offsetLeft-350,a.tagTop=e.target.offsetTop+250,a.spantext=a.arr[t].marker.text,a.sc=a.arr[t].marker.fillColor,a.taglinename=a.arr[t].series_name;var i=new Date(parseInt(a.arr[t].point_id)),n=i.getFullYear(),o=i.getMonth()+1,c=i.getDate();a.tagxname=n+"."+r(o)+"."+r(c),setTimeout(function(){$(".abcdata-wrapper").one("click",function(t){var e=$("#tagtextinput");e.is(":hidden")||($.trim(e.val()).length>0?a.savepoint(info.point,{fillColor:$(".color-bar>.active>i").css("background-color"),text:e.val(),enabled:!0,lineColor:"#fff",radius:8,lineWidth:2}):a.savepoint(info.point,void 0)),a.cleantagtext=!0,$("#charttag").hide(),setTimeout(function(){a.cleantagtext=!1},100)})},100)}else new PNotify({text:"您没有权限进行标注",type:"error"})}}}},99:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"navigation-panel",data:function(){return{exports:0,dashboardName:""}},mounted:function(){this.exports=parseInt(sessionStorage.exports),this.dashboardName=localStorage.getItem("dashboard-name")},computed:{isFullScreenWatch:function(){return this.$store.state.fullscreen.isFullScreenWatch},isFullScreenWatchTable:function(){return this.$store.state.fullscreen.isFullScreenWatchTable},dashBoard:function(){return this.$store.state.dashboard.curDashBoard},curWatchChartIdx:function(){return this.$store.state.fullscreen.curWatchChartIdx},isTableChart:function(){return!!this.curChart&&("table"===this.curChart.chartType||"research_data_list"===this.curChart.type||"research_stock_card"===this.curChart.type)},forceShowChartTab:function(){return!!this.curChart&&("research_data_list"===this.curChart.type||"research_stock_card"===this.curChart.type)},curWatchChart_copy:function(){return this.$store.state.fullscreen.curWatchChart_copy||{}},isShowChartList:function(){return this.$store.state.fullscreen.isShowChartList},curFullChart:function(){return this.$store.state.fullscreen.curFullChart},curChart:function(){return this.dashBoard&&this.isFullScreenWatch?this.dashBoard.charts[this.curWatchChartIdx]:null},watchDbId:function(){return this.$store.state.dashboard.dashBoardId},fromPath:function(){return this.$store.state.fullscreen.fromPath},lang:function(){return this.$store.state.dashboard.lang},isMobile:function(){return this.$store.state.common.isMobile},curDay:function(){return this.$store.state.dashboard.curDay},showtype:function(){return this.$store.state.fullscreen.showtype}},methods:{setFullScreenWatchTable:function(t){if(t?(this.$store.commit("zb_changeShowType","table"),GaHelper.sendEvent(GaHelper.FullScreen.viewData,this.dashboardName+"看板-"+this.curWatchChart_copy.title+"-data")):(this.$store.commit("zb_changeShowType","chart"),GaHelper.sendEvent(GaHelper.FullScreen.viewChart,this.dashboardName+"看板-"+this.curWatchChart_copy.title+"chart")),this.forceShowChartTab&&!t)return!1;this.$store.commit("setFullScreenWatchTable",{isWatch:t})},changeFullScreenWatchTable:function(){this.$store.commit("setFullScreenWatchTable",{isWatch:!this.isFullScreenWatchTable})},toCaption:function(){this.$store.commit("zb_changeShowType","caption")},destroyChartOrTable:function(){$("#cc-chart-container").highcharts()&&$("#cc-chart-container").highcharts().destroy(),$("#cc-table-container").handsontable("getInstance")&&$("#cc-table-container").handsontable("getInstance").destroy(),$("#cc-table-container").empty()},exitFullScreen:function(){var t=this;t.destroyChartOrTable(),t.$store.commit("setFullScreenWatch",{isWatch:!1}),t.$store.commit("setShowChartList",{isShow:!1}),t.$router.push({name:"dashboard",params:{bid:t.watchDbId}})},fileExport:function(t){if(GaHelper.sendEvent(GaHelper.FullScreen.export,this.dashboardName+"看板-"+this.curWatchChart_copy.title+"-export"),this.curChart)if("excel"==t)FileExport.export({type:"excel",data:this.curFullChart.data,fname:(this.curWatchChart_copy.title||"").trim().substring(0,31)});else if("png"==t)return!1}}}}});